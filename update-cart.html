<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../polymer/polymer.html">
<!--
  `<update-cart></update-cart>` auto update cart
  @demo demo.html
-->
<dom-module id="update-cart">
  <template>
    <style>:host {display:inline-block;}</style>
    <paper-input label="Qty" min=0 value="{{qty}}" type="number" style="width:50px;display:inline-block">
    </paper-input>
    <paper-item style="width:150px;display:inline-block">price per item {{symbol}}{{price}}</paper-item>
    <paper-item style="width:100px;display:inline-block">total: {{symbol}}{{total}}</paper-item>
    <content></content>
  </template>
</dom-module>
<script>
  Polymer({
    is: "update-cart",
    properties:{
      qty:{
        type:Number,
        value:1,
      },
      total:{
        computed:"getTotal(qty,price)",
      },
    },
    getTotal: function(qty,price){
      return qty * price
    },
    ready: function(){
      this.qty = this.queryAllEffectiveChildren('*')[0].children[1].children[0].children[0].children[0].value
      var totalAsText = this.queryAllEffectiveChildren('*')[0].children[2].children[0].innerText
      this.symbol = totalAsText[0]
      this.price = totalAsText.split(",").join("").split("").splice(1).join("")/this.qty
      this.queryEffectiveChildren('*').hidden = true
    },
  })
</script>
